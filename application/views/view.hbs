<div class="wrapper d-flex">
  <div class="content flex-grow-1 p-4">
    {{log this}}
    <main>
      {{> search}}

      <video class="w-100 rounded" controls>
        <source src="/{{post.video}}" type="video/mp4">
      </video>

      <div class="viewpost mb-4 text-white">
        <h2 class="post-title">{{post.title}}</h2>
        <div class="post-author-date d-flex justify-content-between align-items-center">
          <div>
            <p class="author mb-0">{{post.username}}</p>
            <p class="date-posted mb-0"><small>{{formatDate post.created_at}}</small></p>
          </div>

          <div class="d-flex align-items-center gap-3 mt-3">
            <button id="like-button" data-postid="{{post.post_id}}"
              class="btn btn-outline-light {{#if userLiked}}liked{{/if}}">
              <i class="bi bi-hand-thumbs-up{{#if userLiked}}-fill{{/if}}"></i>
              <span id="like-count">{{likeCount}}</span> Like{{#if likeCount}}s{{/if}}
            </button>

            <div>
              <strong id="comment-count">{{comments.length}}</strong> Comment{{#if comments.length}}s{{/if}}
            </div>
          </div>

        </div>

        <div class="comment-box mt-4">
          <h5 class="text-white mb-3">Add a comment</h5>

          <div class="d-flex gap-3">
            <img src="" alt="User Avatar" class="rounded-circle" width="48" height="48">
            <textarea name="comment" id="comment-text" class="form-control flex-grow-1" rows="3"
              placeholder="Write a comment..."></textarea>
          </div>
          <div class="mt-2 d-flex justify-content-end">
            <button id="comment-button" data-postid="{{post.post_id}}" class="btn btn-primary px-4">Comment</button>
          </div>
        </div>

        <div class="comments" id="comment-list">
          {{#each comments}}
          <div class="comment mb-3 p-2 rounded bg-dark text-white">
            <p><strong>{{this.username}}</strong> <small>{{formatDate this.created_at}}</small></p>
            <p>{{this.text}}</p>
          </div>
          {{/each}}
        </div>

    </main>
  </div>
</div>